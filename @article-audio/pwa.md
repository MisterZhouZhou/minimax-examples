# 渐进式Web应用（PWA）总结

## 什么是渐进式Web应用？

渐进式Web应用（PWA）是使用Web平台技术构建的应用，同时提供类似于平台特定应用的用户体验。PWA结合了传统网站和平台特定应用的最佳特性，既保留了Web的跨平台优势，又具备了原生应用的用户体验和功能特性。

## 平台特定应用的特点

平台特定应用是为特定操作系统或设备类别开发的应用程序，通常使用平台供应商提供的SDK构建，并通过应用商店分发。其主要优势包括：

- **用户易于访问**：在设备上拥有独立图标，使用户容易找到并打开应用
- **离线和后台操作**：能够在用户未交互时和设备离线状态下运行
- **专用UI**：可以实现独特、沉浸式的用户界面
- **操作系统集成**：可与主机操作系统深度集成，如注册为分享目标，访问设备特性（相机、GPS、加速度计等）
- **应用商店集成**：通过应用商店分发，为用户提供统一的发现和安装渠道

## 传统网站的特点

传统网站更像是"用户访问的地方"，而非"用户拥有的东西"。传统网站通常：
- 在用户不访问时，在设备上没有存在感
- 只能通过浏览器导航访问
- 高度依赖网络连接

然而，网站相比平台特定应用也有一些优势：
- **单一代码库**：由于Web本身是跨平台的，网站可以从一个代码库在不同操作系统和设备上运行
- **通过Web分发**：网站被搜索引擎索引，可通过URL分享和访问，不需要注册应用商店

## 渐进式Web应用的特点

PWA结合了传统网站和平台特定应用的优势：

### 网站的优势
- 使用标准Web平台技术开发，可从单一代码库在多平台运行
- 可直接通过Web访问

### 平台特定应用的优势
- **可安装在设备上**
  - 可从平台应用商店或直接从Web安装
  - 可自定义安装过程
  - 安装后在设备上拥有应用图标
  - 可作为独立应用启动，而非浏览器中的网站
- **可在后台与离线运行**
  - 在设备没有网络连接时工作
  - 在后台更新内容
  - 响应服务器推送消息
  - 使用操作系统通知系统显示通知
- 可使用整个屏幕，而非在浏览器UI中运行
- 可与设备集成，注册为共享目标和来源，访问设备特性
- 可通过应用商店和Web发布

## PWA与浏览器的关系

在浏览器中访问网站时，网站明显是"运行在浏览器中"，浏览器UI为网站提供可见框架。而PWA通常看起来像平台特定应用，它们通常不显示浏览器UI，但从技术上讲，它们仍然是网站。

PWA需要浏览器引擎（如Chrome或Firefox中的引擎）来管理和运行。对于平台特定应用，平台操作系统管理应用提供运行环境；对于PWA，浏览器引擎在后台执行这一角色。

在某些系统（如Chromebook）上，"浏览器"和"操作系统"之间可能没有明显区别。

## PWA的技术特性

PWA作为网站，具有与其他网站相同的基本特性：至少有一个HTML页面，通常加载CSS和JavaScript。除此之外，PWA还具有一些额外的技术特性：

### Web应用程序清单
- PWA必须有Web应用程序清单，且清单必须包含足够信息使浏览器能够安装PWA
- 清单可以定义PWA外观的许多方面（如主题颜色、背景颜色）及其行为（如作为共享目标、处理特定文件类型的能力）

### Service Worker
- PWA通常使用Service Worker提供至少最小程度的离线体验
- Service Worker鼓励一种架构：应用页面实现用户界面，Service Worker实现后端支持离线和后台操作
- Service Worker可以在需要时（如处理推送通知）由浏览器在后台启动

## PWA与单页应用

传统网站由相互链接的页面集合构建，而单页应用（SPA）由一个HTML页面组成，通过JavaScript从服务器获取新内容并更新页面的相关部分。

- 单页应用可提供更接近平台特定应用的用户体验，所以PWA通常实现为单页应用
- 单页应用使实现无缝用户界面更容易，用户被呈现单一、一致的页面
- PWA不必是单页应用，单页应用也不必是PWA

## 渐进增强

对PWA尤为重要，因为它们期望在广泛设备上运行，并经常使用可能不被所有浏览器支持的高级Web API。

- 基本组成：用户通过浏览器访问PWA时可像普通网站一样交互；如果浏览器支持安装，用户将被提示安装
- PWA应对高级API执行特性检测并提供可接受的回退体验

例如，后台同步API使PWA可以在设备连接时发出网络请求。在不支持后台同步的设备上，应用应让用户知道无法完成操作，并给予重试机会。 